---
tags: [Book/Effective Java/Ch9 - 일반적인 프로그래밍 원칙]
title: '[Item 67] 최적화는 신중히 하라'
created: '2022-07-19T14:09:35.461Z'
modified: '2022-07-20T14:42:53.463Z'
---

# [Item 67] 최적화는 신중히 하라

일반적으로 최적화를 하면 제대로 동작하는 코드가 빨라질 것이라 기대하지만, 실제로 최적화는 빨라지지도, 제대로 동작하지도 않는다. 좋은 프로그램은 아키텍처를 유지하면서 최적화할 수 있는 방안이 있을 것이고, **정보 은닉을 지키며 개별 구성요소를 독립적으로 설계할 수 있을 것이다.** 개발 이후 최적화를 진행하지 말고, 설계 단계에서 성능을 염두에 두어라.

## 설계에서 최적화를 고려하는 방법

- 성능을 제한하는 설계 하지 않기: 컴포넌트끼리의 소통이나 외부 시스템과의 소통은 변경이 어렵고 시스템 성능을 떨어뜨리므로 피하는 것이 좋다.
- API를 설계할 때 성능에 주는 영향 고려하기
  - public 접근제한자가 붙는 변수를 가변으로 생성하면 불필요한 방어적 복사를 유발한다.
  - 컴포지션할 수 있는 것을 상속으로 구현한다면 public 클래스는 상위 클래스에 종속되고 성능 제약도 물려받는다.

## 성능과 API 설계

잘 설계된 API는 일반적으로 성능도 좋지만, 성능을 위해 API를 제대로 만들지 않는 것은 좋지 않은 생각이다. 명확하게 설계된 프로그램에서 최적화를 고려해야 한다.

## 그래도 최적화를 하려면?

개발자는 프로그램에서 잡아먹는 시간을 계산하는 데에 어려움을 겪는다. 그런 이유로 최적화 기법을 도입한 후에 성능이 나빠지는 경우도 있다. 프로파일링 도구를 사용하면 어떤 부분을 최적화할지 도움을 얻을 수 있다. 특히 다양한 기본 연산에 드는 비용을 정확하게 측정하기 어려운 자바 언어에서는 더욱이 프로파일링이 중요하다.

> 빠른 프로그램보다는 좋은 프로그램을 작성하자. 성능 최적화 전 올바른 알고리즘을 사용했는지 확인하자.
