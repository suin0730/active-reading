---
tags: [Book/운영체제 아주 쉬운 세 가지 이야기/Ch2 - 메모리 가상화]
title: '[13] 주소 공간의 개념'
created: '2022-01-18T23:05:49.222Z'
modified: '2022-01-18T23:47:28.189Z'
---

# [13] 주소 공간의 개념

## 13.1 초기 시스템

- 메모리 관점에서 초기 컴퓨터는 사용자에게 많은 개념을 제공하지 않았음
- 메모리에서는 물리 주소 0부터 운영체제 프로그램을 적재했고 나머지 메모리를 기타 프로그램이 사용

## 13.2 멀티프로그래밍과 시분할

- 멀티프로그래밍
  - 고가 장비인 컴퓨터를 효과적으로 사용하기 위해 **멀티프로그래밍** 도입
  - 여러 프로세스가 실행 준비 상태에 있고, 운영체제가 이들을 전환하며 실행
  - CPU 이용률 증가, 효율성 개선
- 시분할
  - 일괄처리방식 컴퓨팅의 한계로 인해 개발, 사용 효율성이 모두 떨어지고 실행 중인 작업으로부터 즉시 응답을 받는 **대화식 이용**이 중요해짐
  - 구현 방법
      - 한 프로세스를 짧은 시간 동안 실행 (해당 프로세스에게 모든 권한 위임)
      - 이 프로세스를 중단하고, 중단 시점의 모든 상태를 디스크 종류 장치에 저장
      - 다른 프로세스 상태 탑재 후 짧은 시간 동안 실행
  - 레지스터 상태를 저장, 복원하는 것은 매우 빠르지만 메모리 전체를 디스크에 저장하는 것은 매우 느림
  - **따라서 프로세스 전환 시 프로세스를 메모리에 유지하며, 운영체제가 시분할 시스템을 효율적으로 구현하도록 해야함**
  - 동시에 각 프로세스가 다른 프로세스의 메모리에 접근하지 못하도록 하는 보호 개념이 중요해짐

## 13.3 주소 공간

- 주소 공간
  - 각 프로세스가 서로 메모리 공간에 침범하는 것에 대비해, 사용하기 쉬운 메모리 개념이 필요
  - **주소 공간**은 실행 프로그램의 모든 메모리 상태를 가짐
    - **프로그램 코드(0KB-1KB)**
      - 반드시 메모리에 존재해야 하므로 주소 공간에 존재
      - 코드는 정적이기 때문에 메모리에 저장하기 쉬워서 메모리 상단에 배치
    - **스택(1KB-)**
      - 함수 호출 체인 상의 현위치, 지역 변수, 함수 인자와 반환값 등을 저장
      - 확장할 수 있어야 하므로 주소 영역의 하단에 배치에 위로 올라가는 모양
    - **힙(-16KB)**
      - 동적으로 할당되는 메모리를 위해 사용
      - 확장할 수 있어야 하므로 주쇼 영역의 상단에 배치에 아래로 내려가는 모양
        - 사용자가 malloc()을 호출한 경우 등
  - 실제로 프로그램이 물리 주소 0KB-16KB에 존재하는 것은 아니고, **임의의 물리 주소에 탑재됨**
  - 프로세스가 가상 주소 0으로부터 프로세스를 호출하면 운영체제는 하드웨어 지원을 받아 실제로 프로세스가 탑재된 메모리를 읽도록 보장

## 13.4 목표

- 가상화의 목표
  - **투명성**
    - 운영체제는 실행 중인 프로그램이 가상 메모리 존재를 인지하지 못하도록 가상 메모리 시스템을 구현해야 함
    - 오히려 프로그램은 자신이 완벽한 전용 물리 메모리를 소유한 것처럼 행동해야 함
  - **효윬성**
    - 운영체제는 가상화가 시간, 공간적인 면에서 효율적으로 동작하도록 해야 함
      - 시간 효율적인 가상화 구현 시, TLB 등 하드웨어 기능을 사용할 수 있음
  - **보호**
    - 운영체제는 프로세스와 운영체제 그 자신을 다른 프로세스로부터 보호해야 함
    - 각 프로세스를 격리해, 자신의 주소 공간 밖의 어느 것에도 접근할 수 없어야 함

## 13.5 요약

- 가상 머신 시스템은 명령어롸 데이터 전부를 저장할 수 있는 프로세스 전용 공간을 프로그램에 제공해야 함
- 운영체제는 하드웨어의 도움을 받아 가상 메모리 주소를 물리 주소로 변환할 수 있음




