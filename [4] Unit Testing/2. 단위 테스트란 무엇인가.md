---
tags: [Book, Book/Unit Testing]
title: 단위 테스트란 무엇인가
created: '2022-03-11T07:14:57.192Z'
modified: '2022-03-11T09:32:22.285Z'
---

# 단위 테스트란 무엇인가

## 2.1 단위 테스트의 정의

- 작은 코드 조각을 검증
- 빠르게 수행
- 격리된 방식으로 처리

런던파: 의존성과 별개로 테스트 실행

대역의 장점
- 테스트 대역으로 교체
- 코드베이스에서 어떤 부분이 고장났는지 확실히 알 수 있음
- 객체 그래프를 단순하게 분할할 수 있음
- 클래스와 테스트가 대응되면 테스트 스위트가 간단해짐

준비 단계: 테스트 대상 시스템과 협력자를 준비
- 협력자가 필요한 이유
  - 컴파일 시 필요
  - 검증 단계에서 필요

이 단계에서 고전파는 협력자를 운영 인스턴스로, 런던파는 협력자를 대역(목, 스텁)으로 사용한다.

격리 문제에서 런던파는 각각은 순서 없이 별개로 실행되어야 한다는 입장임

공유 의존성: 테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있다. (static mutable field)
단위 테스트를 격리하는 것은 공유 의존성만 격리하는 것을 의미한다. (싱글턴과 config 클래스 등은 공유되지 않는다.)
공유 의존성은 일반적으로 실행 프로세스 외부에 있으므로 대체하면 테스트 실행 속도가 높아진다.

## 2.2 단위 테스트의 런던파와 고전파

격리 주체, 단위 크기, 테스트 대역 사용 대상이 다르다.

런던파는 불변 외 모든 의존성만 테스트 대역으로 사용한다. 즉 불변 객체(값 객체)는 교체하지 않는다.

- 공유 (데이터베이스)
- 비공개
  - 변경 가능 (Store)
  - 변경 불가능 (Product)

주의할 점은 모든 프로세스 외부 의존성이 공유 의존성은 아니라는 것이다. (읽기 전용 API 서비스)

## 2.3 고전파와 런던파의 비교

**둘의 가장 큰 차이는 단위 테스트 정의에서 격리 문제를 어떻게 다루는지이다.**
목을 사용하면 취약성이 높아진다.

런던파의 장점
- 입자성이 좋다. 테스트가 세밀하다.
- 클래스 그래프가 커져도 테스트하기 쉽다.
- 어떤 기능이 실패했는지 확실히 알 수도 있다.

## 2.4 두 분파의 통합 테스트

- 런던파: 실제 협력자 객체를 사용하는 모든 테스트를 통합 테스트라 한다. 따라서 고전파의 단위 테스트는 런던파에게 모두 통합 테스트처럼 여겨진다.
